#!/usr/bin/env bash
# ------------------------------------------------------------------------------
eval $DeBug
# ------------------------------------------------------------------------------
cmd_base=$(dirname $0)
# ------------------------------------------------------------------------------
go build varmGetter.go
# ------------------------------------------------------------------------------
export STOMP_ACKMODE=client
export STOMP_PBC=0
#
# Prime for this with
#     cd ../varmGetter
#     MAX_QUEUE=100 MSG_COUNT=100 ./puts.sh 
#     cd -
#
# ------------------------------------------------------------------------------
cqn=1
while [ "$cqn" -le "99" ]; do
	echo "---------------------------------------------------------------------"
	ncmd="STOMP_DEST=/queue/varmGetter.${cqn} STOMP_NMSGS=${cqn} ./varmGetter"
	echo "Next Puts: ${ncmd}"
	eval ${ncmd}
	let cqn=cqn+1
done
# ------------------------------------------------------------------------------
set +x
